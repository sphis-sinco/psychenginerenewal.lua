<html lang="en"></html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Psych Engine Renewal - PlayState Functions</title>
		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet" href="../css/header.css">
		<link rel="stylesheet" href="../css/search.css">
		<link rel="stylesheet" href="../css/theme.css">
		<link rel="icon" href="../assets/icon.ico" type="image/x-icon">
	</head>

	<body>
		<!-- Create Search Bar and Theme Boxes-->
		<div class="sidebar"></div>
		<div class="themeBox" onclick="switchTheme()">
			<div class="themeDot"></div>
			<div class="themeDot" style="margin-left: 70px"></div>
			<button class="themeBtn" id="themeSelector"></button>
		</div>

		<!-- Load JavaScript-->
		<script src="../js/selector.js"></script>
		<script>createSidebarContent();</script>
		<script src="../js/searchbar.js"></script>
		<script src="../js/theme.js"></script>

		<!-- Header -->
		<div class="headerbox">
			<div class="header">
				<a href="../index.html">
					<img width="64" src="../assets/icon.ico" alt="Psych Engine Logo" draggable="false">
					<div class="headertext">Psych Engine Renewal - Lua Script API</div>
				</a>
			</div>
		</div>

		<!-- Page Info -->
		<div class="infobox">
			<h1>PlayState Functions</h1>
			<p><b>General functions related to the Game State, Song and Cutscenes.</b></p>
			<hr>
			<h2 id="startCountdown">startCountdown</h2>
			<p class="methodbox">Usage: <b>startCountdown()</b></p>
			<p>Starts the countdown, should be used after finishing your Pre-Song Cutscene.</p>
			<hr>
			
			<h2 id="endSong">endSong</h2>
			<p class="methodbox">Usage: <b>endSong()</b></p>
			<p>Ends the song, can be cancelled through the Lua/HScript callback "onEndSong" to make cutscenes.</p>
			<hr>

			<h2 id="getSongPosition">getSongPosition</h2>
			<p class="methodbox">Usage: <b>getSongPosition()</b></p>
			<p>Returns the current song position, in milliseconds.</p>
			<hr>
			
			<h2 id="restartSong">restartSong</h2>
			<p class="methodbox">restartSong(<span class="isoptional">?</span><span class="variablemarkup">skipTransition</span>:Bool = false):Void</p>
			<p>Restarts the Song, pretty self explanatory.</p>
			<ul>
				<li><b><span class="variablemarkup">skipTransition</span> (Optional)</b> - Skips fade in/out transition, defaults to false.</li>
			</ul>
			<hr>
			
			<h2 id="exitSong">exitSong</h2>
			<p class="methodbox">exitSong(<span class="isoptional">?</span><span class="variablemarkup">skipTransition</span>:Bool = false):Void</p>
			<p>Quits the Song and goes back to Freeplay/Story Mode based on where you started.</p>
			<ul>
				<li><b><span class="variablemarkup">skipTransition</span> (Optional)</b> - Skips fade in/out transition, defaults to false.</li>
			</ul>
			<hr>
			
			<h2 id="loadSong">loadSong</h2>
			<p class="methodbox">loadSong(<span class="isoptional">?</span><span class="variablemarkup">name</span>:String = null, <span class="isoptional">?</span><span class="variablemarkup">difficultyNum</span>:Int = -1):Void</p>
			<p>Loads the chart for a song.</p>
			<ul>
				<li><b><span class="variablemarkup">name</span> (Optional)</b> - Song Name (ex. "Bopeebo", "Lit Up").</li>
				<li><b><span class="variablemarkup">difficultyNum</span> (Optional)</b> - Week's Difficulty Number (0 = Easy, 1 = Normal, 2 = Hard), use -1 to keep it the same as current.</li>
			</ul>
			<hr>
			
			<h2 id="triggerEvent">triggerEvent</h2>
			<p class="methodbox">triggerEvent(<span class="variablemarkup">name</span>:String, <span class="isoptional">?</span><span class="variablemarkup">value1</span>:String = '', <span class="isoptional">?</span><span class="variablemarkup">value2</span>:String = ''):Bool</p>
			<p>Calls an event and uses two arguments for it, exactly like the Chart Editor does.
			<br>Should always return "true".</p>
			<ul>
				<li><b><span class="variablemarkup">name</span></b> - Event Name.</li>
				<li><b><span class="variablemarkup">value1</span> (Optional)</b> - Does the same as what the Event says in the Chart Editor.</li>
				<li><b><span class="variablemarkup">value2</span> (Optional)</b> - Does the same as what the Event says in the Chart Editor.</li>
			</ul>
			<h4>Examples:</h4>
			<ul class="methoddiv">
				<li class="exampleitem"><span class="methodexample">triggerEvent('Hey!', 'BF', 0.6)</span> - Calls "Hey!" event.</li>
			</ul>
			<hr>

			<h2 id="setHealthBarColors">setHealthBarColors</h2>
			<p class="methodbox">setHealthBarColors(<span class="variablemarkup">left</span>:String, <span class="variablemarkup">right</span>:String):Void</p>
			<p>Changes Health Bar colors.</p>
			<ul>
				<li><b><span class="variablemarkup">left</span></b> - Color hexadecimal string or <a href="https://api.haxeflixel.com/flixel/util/FlxColor.html">color name</a> for the left side of the bar.</li>
				<li><b><span class="variablemarkup">right</span></b> - Color hexadecimal string or <a href="https://api.haxeflixel.com/flixel/util/FlxColor.html">color name</a> for the right side of the bar.</li>
			</ul>
			<h4>Examples:</h4>
			<ul class="methoddiv">
				<li class="exampleitem"><span class="methodexample">setHealthBarColors('FF0000', '00FF00')</span> - Makes left side red and right side lime.</li>
				<li class="exampleitem"><span class="methodexample">setHealthBarColors('red', 'lime')</span> - Same as above, but using color names.</li>
			</ul>
			<hr>

			<h2 id="setTimeBarColors">setTimeBarColors</h2>
			<p class="methodbox">setTimeBarColors(<span class="variablemarkup">left</span>:String, <span class="variablemarkup">right</span>:String):Void</p>
			<p>Changes Time Bar colors.</p>
			<ul>
				<li><b><span class="variablemarkup">left</span></b> - Color hexadecimal string or <a href="https://api.haxeflixel.com/flixel/util/FlxColor.html">color name</a> for the left side of the bar.</li>
				<li><b><span class="variablemarkup">right</span></b> - Color hexadecimal string or <a href="https://api.haxeflixel.com/flixel/util/FlxColor.html">color name</a> for the right side of the bar.</li>
			</ul>
			<h4>Examples:</h4>
			<ul class="methoddiv">
				<li class="exampleitem"><span class="methodexample">setTimeBarColors('FF0000', '00FF00')</span> - Makes left side red and right side lime.</li>
				<li class="exampleitem"><span class="methodexample">setTimeBarColors('red', 'lime')</span> - Same as above, but using color names.</li>
			</ul>
			<hr>

			<h2 id="startDialogue">startDialogue</h2>
			<p class="methodbox">startDialogue(<span class="variablemarkup">dialogueFile</span>:String, <span class="isoptional">?</span><span class="variablemarkup">music</span>:String):Void</p>
			<p>Loads a Dialogue .JSON inside the Chart folder, handles translation loading automatically.</p>
			<ul>
				<li><b><span class="variablemarkup">dialogueFile</span></b> - Dialogue file .JSON name.</li>
				<li><b><span class="variablemarkup">music</span> (Optional)</b> - Plays a background music inside "music/" folder.</li>
			</ul>
			<h4>Examples:</h4>
			<ul class="methoddiv">
				<li class="exampleitem"><span class="methodexample">startDialogue('dialogue')</span> - Loads "dialogue.json" inside the chart folder, will prefer "dialogue_pt-BR.json" if you're playing on Portuguese (Brazil).</li>
				<li class="exampleitem"><span class="methodexample">startDialogue('dialogue', 'breakfast')</span> - Same as above, but plays "Breakfast" as background music.</li>
			</ul>
			<hr>

			<h2 id="startVideo">startVideo</h2>
			<p class="methodbox">startVideo(<span class="variablemarkup">videoFile</span>:String, <span class="isoptional">?</span><span class="variablemarkup">canSkip</span>:Bool = true, <span class="isoptional">?</span><span class="variablemarkup">forMidSong</span>:Bool = false, <span class="isoptional">?</span><span class="variablemarkup">shouldLoop</span>:Bool = false, <span class="isoptional">?</span><span class="variablemarkup">playOnLoad</span>:Bool = true):Void</p>
			<p>Plays a Video Cutscene.</p>
			<ul>
				<li><b><span class="variablemarkup">videoFile</span></b> - Video .MP4 file located inside "videos/" folder, don't include the extension!</li>
				<li><b><span class="variablemarkup">canSkip</span> (Optional)</b> - Allows the video to be skipped by holding down Enter for a second. Defaults to true.</li>
				<li><b><span class="variablemarkup">forMidSong</span> (Optional)</b> - Doesn't start/finish song after the video ends, needed for mid-song cutscenes. Defaults to false.</li>
				<li><b><span class="variablemarkup">shouldLoop</span> (Optional)</b> - Video will repeat once finished. Defaults to false.</li>
				<li><b><span class="variablemarkup">playOnLoad</span> (Optional)</b> - Videos plays instantly after loading. Defaults to true.</li>
			</ul>
			<h4>Examples:</h4>
			<ul class="methoddiv">
				<li class="exampleitem"><span class="methodexample">startVideo('test_video')</span> - Plays the video <span class="methodexample">mods/My-Mod/videos/test_video.mp4</span>.</li>
			</ul>
		</div>
	</body>
</html>
